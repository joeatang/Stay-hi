/**
 * üõ°Ô∏è TESLA-GRADE UNIVERSAL EDGE PROTECTION SYSTEM
 * 
 * Wozniak precision engineering for bulletproof mobile UI
 * GaryVee-style edge safety that works across ALL devices
 * Never let elements bleed out - premium app standard
 * 
 * METHODOLOGY:
 * 1. Smart viewport detection with safety margins
 * 2. Progressive scaling based on screen size
 * 3. Touch-safe zones for all interactive elements
 * 4. Dynamic padding that adapts to device quirks
 */

:root {
  /* üéØ Universal Edge Protection Variables */
  --edge-safety-base: 16px;           /* Base safety margin */
  --edge-safety-mobile: 20px;         /* Mobile-specific safety */
  --edge-safety-ultra-mobile: 24px;   /* Ultra-small screens */
  --edge-safety-tablet: 32px;         /* Tablet comfortable margin */
  --edge-safety-desktop: 48px;        /* Desktop luxury spacing */
  
  /* üîß Smart Scaling Variables */
  --scale-factor-mobile: 0.95;        /* Slightly smaller on mobile */
  --scale-factor-small: 0.92;         /* Even smaller on tiny screens */
  --scale-factor-large: 1.0;          /* Full size on large screens */
  
  /* üé® Responsive Container Widths */
  --container-mobile: calc(100vw - (2 * var(--edge-safety-mobile)));
  --container-small: calc(100vw - (2 * var(--edge-safety-ultra-mobile)));
  --container-tablet: calc(100vw - (2 * var(--edge-safety-tablet)));
  --container-desktop: min(1200px, calc(100vw - (2 * var(--edge-safety-desktop))));
  
  /* üöÄ Touch Target Safety */
  --touch-target-min: 44px;           /* iOS HIG minimum */
  --touch-target-safe: 48px;          /* Comfortable touch */
  --touch-spacing-min: 8px;           /* Minimum between targets */
}

/**
 * üõ°Ô∏è UNIVERSAL EDGE PROTECTION BASE
 * Applied to all container elements
 */
.edge-protected {
  width: var(--container-mobile);
  max-width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--edge-safety-mobile);
  padding-right: var(--edge-safety-mobile);
  box-sizing: border-box;
}

/**
 * üì± MOBILE-FIRST RESPONSIVE EDGE PROTECTION
 * Progressively enhances safety margins
 */

/* Ultra-small mobile devices (320px and below) */
@media (max-width: 320px) {
  :root {
    --edge-safety-base: var(--edge-safety-ultra-mobile);
  }
  
  .edge-protected {
    width: var(--container-small);
    padding-left: var(--edge-safety-ultra-mobile);
    padding-right: var(--edge-safety-ultra-mobile);
    transform: scale(var(--scale-factor-small));
    transform-origin: center top;
  }
  
  /* Compensate for scale reduction */
  body {
    padding-top: calc(var(--edge-safety-ultra-mobile) * 0.5);
  }
}

/* Small mobile devices (321px - 375px) */
@media (min-width: 321px) and (max-width: 375px) {
  .edge-protected {
    transform: scale(var(--scale-factor-mobile));
    transform-origin: center top;
  }
}

/* Standard mobile devices (376px - 480px) */
@media (min-width: 376px) and (max-width: 480px) {
  .edge-protected {
    padding-left: var(--edge-safety-mobile);
    padding-right: var(--edge-safety-mobile);
  }
}

/* Large mobile / small tablet (481px - 768px) */
@media (min-width: 481px) and (max-width: 768px) {
  .edge-protected {
    width: var(--container-tablet);
    padding-left: var(--edge-safety-tablet);
    padding-right: var(--edge-safety-tablet);
    transform: scale(1.0);
  }
}

/* Tablet and above (769px+) */
@media (min-width: 769px) {
  .edge-protected {
    width: var(--container-desktop);
    padding-left: var(--edge-safety-desktop);
    padding-right: var(--edge-safety-desktop);
    transform: scale(var(--scale-factor-large));
  }
}

/**
 * üéØ SMART COMPONENT PROTECTION
 * Automatic edge protection for common components
 */

/* Buttons - Always touch-safe */
button,
.btn,
.welcome-btn,
input[type="submit"],
input[type="button"] {
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  margin: var(--touch-spacing-min);
  padding: 12px 24px;
  box-sizing: border-box;
}

/* Form inputs - Generous touch targets */
input,
textarea,
select {
  min-height: var(--touch-target-safe);
  padding: 12px 16px;
  margin: 4px 0 8px 0;
  box-sizing: border-box;
  width: 100%;
  max-width: 100%;
}

/* Cards and panels - Auto edge protection */
.welcome-panel,
.card,
.panel,
.modal {
  margin: var(--edge-safety-base);
  max-width: calc(100vw - (2 * var(--edge-safety-base)));
  box-sizing: border-box;
}

/* Navigation and header elements */
nav,
header,
.nav,
.header {
  padding-left: var(--edge-safety-mobile);
  padding-right: var(--edge-safety-mobile);
}

/**
 * üö® CRITICAL ELEMENT OVERRIDES
 * Bulletproof protection for problematic elements
 */

/* Prevent any element from exceeding viewport */
* {
  max-width: 100vw;
  box-sizing: border-box;
}

/* Images and media - Always contained */
img,
video,
canvas,
svg {
  max-width: 100%;
  height: auto;
}

/* Tables - Horizontal scroll protection */
table {
  width: 100%;
  table-layout: fixed;
  overflow-x: auto;
  display: block;
  white-space: nowrap;
}

/* Text elements - Prevent overflow */
h1, h2, h3, h4, h5, h6, p, span, div {
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}

/**
 * üé® AESTHETIC ENHANCEMENT CLASSES
 * Optional classes for premium spacing
 */

.edge-protected-tight {
  padding-left: calc(var(--edge-safety-mobile) * 0.75);
  padding-right: calc(var(--edge-safety-mobile) * 0.75);
}

.edge-protected-generous {
  padding-left: calc(var(--edge-safety-mobile) * 1.5);
  padding-right: calc(var(--edge-safety-mobile) * 1.5);
}

.edge-protected-luxury {
  padding-left: calc(var(--edge-safety-mobile) * 2);
  padding-right: calc(var(--edge-safety-mobile) * 2);
}

/**
 * üîß DEBUG MODE
 * Uncomment for visual debugging
 */
/*
.edge-protected {
  border: 2px solid rgba(255, 0, 0, 0.5) !important;
  background: rgba(255, 0, 0, 0.1) !important;
}

.edge-protected::before {
  content: attr(class);
  position: absolute;
  top: 0;
  left: 0;
  font-size: 10px;
  background: red;
  color: white;
  padding: 2px 4px;
  z-index: 9999;
}
*/

/**
 * üåü DEVICE-SPECIFIC QUIRK FIXES
 */

/* iPhone X and newer - Handle notch */
@supports (padding: max(0px)) {
  .edge-protected {
    padding-left: max(var(--edge-safety-mobile), env(safe-area-inset-left));
    padding-right: max(var(--edge-safety-mobile), env(safe-area-inset-right));
  }
}

/* Samsung Galaxy and curved edges */
@media screen and (max-width: 430px) and (min-resolution: 2dppx) {
  .edge-protected {
    padding-left: calc(var(--edge-safety-mobile) + 4px);
    padding-right: calc(var(--edge-safety-mobile) + 4px);
  }
}