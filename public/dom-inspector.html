<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç DOM ELEMENT INSPECTOR</title>
    <style>
        body {
            background: #0a0a0a;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            padding: 20px;
        }
        .terminal {
            background: rgba(0,0,0,0.9);
            border: 2px solid #00ff41;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            max-height: 400px;
            overflow-y: auto;
            font-size: 12px;
        }
        .critical { color: #ff0040; }
        .success { color: #40ff00; }
        .warning { color: #ffaa00; }
        .info { color: #00aaff; }
        button {
            background: #003300;
            color: #00ff41;
            border: 2px solid #00ff41;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 4px;
            font-family: 'Courier New', monospace;
        }
        button:hover { background: #004400; }
        iframe {
            width: 100%;
            height: 600px;
            border: 2px solid #00ff41;
            border-radius: 8px;
            margin: 16px 0;
        }
    </style>
</head>
<body>
    <h1>üîç DOM ELEMENT INSPECTOR</h1>
    
    <div>
        <button onclick="inspectSigninPage()">üéØ INSPECT SIGNIN DOM</button>
        <button onclick="testErrorTrigger()">‚ö° TEST ERROR TRIGGER</button>
        <button onclick="forceShowElements()">üöÄ FORCE SHOW ELEMENTS</button>
        <button onclick="clearLog()">üóëÔ∏è CLEAR</button>
    </div>

    <div class="terminal" id="log"></div>

    <iframe id="signinFrame" src="/signin.html" style="display: none;"></iframe>

    <script>
        function log(message, type = 'info') {
            const logEl = document.getElementById('log');
            const timestamp = new Date().toISOString().substr(11, 12);
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = `[${timestamp}] ${message}`;
            logEl.appendChild(div);
            logEl.scrollTop = logEl.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }

        function inspectSigninPage() {
            log('üîç INSPECTING SIGNIN PAGE DOM', 'success');
            
            const frame = document.getElementById('signinFrame');
            frame.style.display = 'block';
            
            setTimeout(() => {
                try {
                    const frameDoc = frame.contentDocument || frame.contentWindow.document;
                    
                    log('üìÑ Signin page loaded, checking elements...', 'info');
                    
                    // Check critical elements
                    const elements = [
                        'configError',
                        'demoOption', 
                        'errorDetails',
                        'signinForm',
                        'signinBtn'
                    ];
                    
                    elements.forEach(id => {
                        const el = frameDoc.getElementById(id);
                        if (el) {
                            const styles = window.getComputedStyle(el);
                            log(`‚úÖ ${id}: EXISTS`, 'success');
                            log(`   ‚Ä¢ display: ${styles.display}`, 'info');
                            log(`   ‚Ä¢ visibility: ${styles.visibility}`, 'info');
                            log(`   ‚Ä¢ opacity: ${styles.opacity}`, 'info');
                            log(`   ‚Ä¢ classList: ${Array.from(el.classList).join(', ') || 'none'}`, 'info');
                        } else {
                            log(`‚ùå ${id}: NOT FOUND`, 'critical');
                        }
                    });
                    
                    // Check if handleConfigurationError function exists
                    const frameWindow = frame.contentWindow;
                    if (frameWindow.handleConfigurationError) {
                        log('‚úÖ handleConfigurationError: FUNCTION EXISTS', 'success');
                    } else {
                        log('‚ùå handleConfigurationError: FUNCTION MISSING', 'critical');
                    }
                    
                } catch (error) {
                    log(`‚ùå Frame access error: ${error.message}`, 'critical');
                    log('‚ÑπÔ∏è  Trying direct URL approach...', 'info');
                }
            }, 2000);
        }

        function testErrorTrigger() {
            log('‚ö° TESTING ERROR TRIGGER', 'success');
            
            const frame = document.getElementById('signinFrame');
            
            setTimeout(() => {
                try {
                    const frameWindow = frame.contentWindow;
                    const frameDoc = frame.contentDocument || frameWindow.document;
                    
                    if (frameWindow.handleConfigurationError) {
                        log('üéØ Triggering handleConfigurationError manually...', 'info');
                        
                        // Create a test error
                        const testError = {
                            error_code: 'email_address_invalid',
                            message: 'Email address "test@debug.com" is invalid'
                        };
                        
                        // Call the function directly
                        frameWindow.handleConfigurationError(testError);
                        
                        log('‚úÖ Function called, checking results...', 'success');
                        
                        // Check if elements are now visible
                        setTimeout(() => {
                            const configError = frameDoc.getElementById('configError');
                            const demoOption = frameDoc.getElementById('demoOption');
                            
                            if (configError) {
                                const styles = window.getComputedStyle(configError);
                                log(`üîç configError display: ${styles.display}`, 'info');
                                log(`üîç configError visibility: ${styles.visibility}`, 'info');
                            }
                            
                            if (demoOption) {
                                const styles = window.getComputedStyle(demoOption);
                                log(`üîç demoOption display: ${styles.display}`, 'info');
                                log(`üîç demoOption visibility: ${styles.visibility}`, 'info');
                            }
                        }, 500);
                        
                    } else {
                        log('‚ùå Cannot test - function not found', 'critical');
                    }
                    
                } catch (error) {
                    log(`‚ùå Test error: ${error.message}`, 'critical');
                }
            }, 2000);
        }

        function forceShowElements() {
            log('üöÄ FORCE SHOWING ELEMENTS', 'success');
            
            const frame = document.getElementById('signinFrame');
            
            setTimeout(() => {
                try {
                    const frameDoc = frame.contentDocument || frame.contentWindow.document;
                    
                    const configError = frameDoc.getElementById('configError');
                    const demoOption = frameDoc.getElementById('demoOption');
                    
                    if (configError) {
                        configError.style.display = 'block';
                        configError.style.visibility = 'visible';
                        configError.style.opacity = '1';
                        configError.classList.add('visible');
                        log('‚úÖ configError forced visible', 'success');
                    }
                    
                    if (demoOption) {
                        demoOption.style.display = 'block';
                        demoOption.style.visibility = 'visible';
                        demoOption.style.opacity = '1';
                        demoOption.classList.add('visible');
                        log('‚úÖ demoOption forced visible', 'success');
                    }
                    
                    log('üéØ Check the signin page - elements should now be visible!', 'warning');
                    
                } catch (error) {
                    log(`‚ùå Force show error: ${error.message}`, 'critical');
                }
            }, 1500);
        }

        // Auto-start inspection
        setTimeout(() => {
            log('üöÄ Auto-starting DOM inspection...', 'info');
            inspectSigninPage();
        }, 1000);
    </script>
</body>
</html>