<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HI DEV - Rollout Ops Console</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #00d4aa;
        }
        .badge {
            background: #ff4757;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .console {
            background: #000;
            color: #00ff88;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .link {
            background: rgba(0, 212, 170, 0.1);
            border: 1px solid #00d4aa;
            border-radius: 8px;
            padding: 15px;
            text-decoration: none;
            color: #00d4aa;
            text-align: center;
        }
        .link:hover {
            background: rgba(0, 212, 170, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>HI DEV Rollout Operations</h1>
            <div class="badge">DEV-ONLY</div>
            <p>Phase 8 Cohort Management Console</p>
        </div>

        <div class="section">
            <h3>üéØ Quick Links</h3>
            <div class="links">
                <a href="../phase7-verifier/verifier.html" class="link">
                    üìä Phase 7 Verifier
                </a>
                <a href="../../hi-dashboard.html" class="link">
                    üè† Dashboard (Test Site)
                </a>
                <a href="../../hi-island-NEW.html" class="link">
                    üèùÔ∏è Island (Test Site)
                </a>
            </div>
        </div>

        <div class="section">
            <h3>üõ†Ô∏è Rollout Commands</h3>
            <div class="console">
# Available in browser console:

# Show current rollout percentages
HiRolloutOps.showAll()

# Check if flag enabled for current identity  
await HiRolloutOps.check('hifeed_enabled')

# Update rollout percentage (0-100)
HiRolloutOps.set('hifeed_enabled', 25)

# Test cohort distribution
await HiRolloutOps.testCohort('hifeed_enabled', 100)

# Quick presets
HiRolloutOps.presets.start()  // 10%
HiRolloutOps.presets.mid()    // 50% 
HiRolloutOps.presets.full()   // 100%
HiRolloutOps.presets.off()    // 0% (emergency)
            </div>
        </div>

        <div class="section">
            <h3>üìã Rollout Flags</h3>
            <ul>
                <li><strong>hifeed_enabled</strong> - Hi Experience Layer (HiFeed + HiStreaks)</li>
                <li><strong>hibase_shares_enabled</strong> - HiBase shares integration</li>
                <li><strong>hibase_profile_enabled</strong> - HiBase profile system</li>
                <li><strong>hibase_referrals_enabled</strong> - HiBase referral system</li>
            </ul>
        </div>

        <div class="section">
            <h3>üö® Emergency Procedures</h3>
            <div class="console">
# Kill switch (disable all rollouts)
HiRolloutOps.presets.off()

# Restart from 10% after issue resolution
HiRolloutOps.presets.start()
            </div>
        </div>
    </div>

    <!-- Load rollout ops -->
    <script type="module" src="./rollout/rollout-ops.js"></script>
</body>
</html>