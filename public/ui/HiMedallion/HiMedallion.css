/* ===================================================================
   HI MEDALLION COMPONENT (Refactored for shield / target look)
=================================================================== */

/* Intentionally avoid redefining CSS vars here to let page-level overrides win */

.hi-medallion {
  --size: clamp(280px, 45vw, 500px);
  width: var(--size);
  height: var(--size);
  position: relative;
  display: grid;
  place-items: center;
  border-radius: 50%;
  isolation: isolate;
  transform: translateZ(0) translate3d(0, 0, 0);
  will-change: transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  perspective: 1000px;
  -webkit-perspective: 1000px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  user-select: none;
  touch-action: manipulation;
  transition: transform .18s cubic-bezier(.2,.7,.2,1), filter .18s ease-out, box-shadow .18s ease-out;
}

.hi-medallion__base {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,.06) 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(0,0,0,.04) 0%, transparent 35%),
    radial-gradient(120% 120% at 30% 25%, var(--hi-medallion-bg1, #4A90E2) 0%, var(--hi-medallion-bg2, #2E5BBA) 70%),
    linear-gradient(145deg, rgba(255,255,255,.08), rgba(0,0,0,.02)),
    linear-gradient(180deg, rgba(0,0,0,.03), rgba(255,255,255,.06));
  box-shadow:
    0 24px 60px rgba(0,0,0,.4),
    0 8px 24px rgba(0,0,0,.25),
    inset 0 12px 28px rgba(255,255,255,.12),
    inset 0 -20px 32px rgba(0,0,0,.3),
    inset 0 0 0 1px rgba(255,255,255,.06);
  z-index: 1;
}

.hi-medallion__rings { 
  position:absolute; inset:0; border-radius:50%; pointer-events:none; 
  /* Tunable target look */
  --ring-width: var(--hi-medallion-ring-width, 2px);
  --ring-gap: var(--hi-medallion-ring-gap, 28px);
  --ring-opacity: var(--hi-medallion-ring-opacity, .55);
  background: repeating-radial-gradient(
    circle at 50% 50%, 
    rgba(255,255,255,.09) 0 var(--ring-width), 
    transparent var(--ring-width) calc(var(--ring-gap))
  ); 
  mix-blend-mode: overlay; 
  opacity: var(--ring-opacity);
  z-index:2; 
  will-change: transform, opacity; 
  transition: transform .22s cubic-bezier(.2,.7,.2,1), opacity .22s ease-out; 
}
.hi-medallion__texture { 
  position:absolute; inset:0; border-radius:50%; pointer-events:none; 
  --texture-opacity: var(--hi-medallion-texture-opacity, .25);
  background:repeating-linear-gradient(45deg, rgba(255,255,255,.05) 0 6px, rgba(0,0,0,.06) 6px 12px); 
  mix-blend-mode:overlay; 
  opacity: var(--texture-opacity); 
  z-index:3; 
  will-change: transform, opacity; 
  transition: transform .22s cubic-bezier(.2,.7,.2,1), opacity .22s ease-out; 
}
.hi-medallion__edge { position:absolute; inset:-1px; border-radius:inherit; box-shadow:0 0 0 1px var(--hi-medallion-edge, rgba(46,91,186,0.4)) inset; opacity:.85; pointer-events:none; z-index:6; }
.hi-medallion__halo { position:absolute; inset:-18%; border-radius:50%; background:radial-gradient(70% 70% at 50% 50%, var(--hi-medallion-halo, rgba(74,144,226,0.25)) 0%, rgba(255,255,255,0) 70%); filter:blur(18px); opacity:0; transform:scale(.9); pointer-events:none; mix-blend-mode:screen; transition:opacity .22s ease-out, transform .22s ease-out; z-index:4; }
/* üèóÔ∏è TESLA-GRADE: Sunray pulse effect */
.hi-medallion::before {
  content: '';
  position: absolute;
  inset: -25%;
  border-radius: 50%;
  background: 
    conic-gradient(from 0deg, 
      transparent 0deg, 
      rgba(255, 209, 102, 0.25) 15deg,
      transparent 30deg,
      rgba(255, 209, 102, 0.15) 45deg,
      transparent 60deg,
      rgba(255, 209, 102, 0.20) 75deg,
      transparent 90deg,
      rgba(255, 209, 102, 0.10) 105deg,
      transparent 120deg,
      rgba(255, 209, 102, 0.18) 135deg,
      transparent 150deg,
      rgba(255, 209, 102, 0.12) 165deg,
      transparent 180deg,
      rgba(255, 209, 102, 0.22) 195deg,
      transparent 210deg,
      rgba(255, 209, 102, 0.08) 225deg,
      transparent 240deg,
      rgba(255, 209, 102, 0.20) 255deg,
      transparent 270deg,
      rgba(255, 209, 102, 0.15) 285deg,
      transparent 300deg,
      rgba(255, 209, 102, 0.25) 315deg,
      transparent 330deg,
      rgba(255, 209, 102, 0.12) 345deg,
      transparent 360deg
    );
  z-index: -2;
  animation: sunrayPulse 8s ease-in-out infinite;
  opacity: 0.7;
  filter: blur(2px);
}

/* üèóÔ∏è TESLA-GRADE: Premium icon display with Tesla texture */
.hi-medallion__icon {
  max-width: min(65%, 240px);
  --ring-width: var(--hi-medallion-ring-width, 3px);
  --ring-gap: var(--hi-medallion-ring-gap, 24px);
  --ring-opacity: var(--hi-medallion-ring-opacity, .65);
  position: relative;
  z-index: 3;
  filter: brightness(1.05) contrast(1.05);
  opacity: 0.98;
  border-radius: 0;
  background: transparent;
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  object-fit: contain;
}

/* HI DEV: Dark surface bleed fix for gradient backgrounds */
.hi-medallion::after {
  content: '';
  position: absolute;
  inset: 6%;
  border-radius: inherit;
  background: radial-gradient(120% 120% at 30% 25%, rgba(0, 0, 0, 0.08), rgba(0, 0, 0, 0));
  mix-blend-mode: multiply;
  pointer-events: none;
}

/* ===================================================================
   üéØ INTERACTION STATES - Tesla-Grade Motion
=================================================================== */

/* HI DEV: Active state (tap/click) */
.hi-medallion:active,
.hi-medallion.is-pressed {
  transform: scale(0.985);
  transition-duration: 0.08s; /* Faster on press */
}

/* HI DEV: Hover state (desktop only) */
@media (hover: hover) and (pointer: fine) {
  .hi-medallion:hover {
    transform: translateY(-2px) scale(1.01);
    filter: brightness(1.02);
  }
  /* Subtle parallax for depth */
  .hi-medallion { perspective: 800px; }
  .hi-medallion__base,
  .hi-medallion__edge,
  .hi-medallion__icon { 
    will-change: transform; 
    transition: transform .22s cubic-bezier(.2,.7,.2,1); 
  }
  .hi-medallion:hover .hi-medallion__base { transform: translateY(0.6px) scale(1.002); }
  .hi-medallion:hover .hi-medallion__rings { transform: translate(-0.6px, -0.6px) scale(1.003); opacity: calc(var(--ring-opacity) + .05); }
  .hi-medallion:hover .hi-medallion__texture { transform: translate(0.6px, 0.6px) scale(1.004); opacity: calc(var(--texture-opacity) + .03); }
  .hi-medallion:hover .hi-medallion__icon { transform: translateY(-0.4px) scale(1.003); }
}

/* HI DEV: Focus state for accessibility - Tesla blue theme */
.hi-medallion:focus-visible {
  outline: 3px solid rgba(74, 144, 226, 0.6);
  outline-offset: 4px;
}

/* HI DEV: Pulse animation on tap */
.hi-medallion.is-pulsing .hi-medallion__halo {
  opacity: 0.9;
  transform: scale(1.06);
  animation: hiHalo 0.6s ease-out forwards;
}

/* üèóÔ∏è TESLA-GRADE: Enhanced sunray pulse animation */
@keyframes hiHalo {
  0% { 
    opacity: 1; 
    transform: scale(1.05);
    filter: hue-rotate(0deg) brightness(1.1) saturate(1.2);
  }
  20% {
    opacity: 1.15;
    transform: scale(1.15);
    filter: hue-rotate(12deg) brightness(1.25) saturate(1.4);
  }
  50% {
    opacity: 0.95;
    transform: scale(1.5);
    filter: hue-rotate(25deg) brightness(1.4) saturate(1.5);
  }
  100% { 
    opacity: 0; 
    transform: scale(1.8);
    filter: hue-rotate(35deg) brightness(1.6) saturate(1.7);
  }
}

/* üèóÔ∏è TESLA-GRADE: Premium sunray pulse effect */
@keyframes sunrayPulse {
  0% {
    transform: scale(1) rotate(0deg);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.05) rotate(180deg);
    opacity: 0.85;
  }
  100% {
    transform: scale(1) rotate(360deg);
    opacity: 0.5;
  }
}

/* ===================================================================
   üéØ RESPONSIVE BREAKPOINTS - Mobile to Desktop Scaling
=================================================================== */

/* HI DEV: Mobile portrait (320px-480px) */
@media screen and (max-width: 480px) and (orientation: portrait) {
  .hi-medallion {
    --size: clamp(160px, 35vw, 220px);
  }
}

/* HI DEV: Mobile landscape */
@media screen and (max-height: 500px) and (orientation: landscape) {
  .hi-medallion {
    --size: clamp(140px, 25vh, 200px);
  }
}

/* HI DEV: Tablet (768px-1024px) */
@media screen and (min-width: 768px) and (max-width: 1024px) {
  .hi-medallion {
    --size: clamp(220px, 24vw, 280px);
  }
}

/* üèóÔ∏è TESLA-GRADE: Enhanced desktop presence */
@media screen and (min-width: 1025px) {
  .hi-medallion {
    --size: clamp(320px, 22vw, 420px);
  }
}

/* üèóÔ∏è TESLA-GRADE: Large desktop premium sizing */
@media screen and (min-width: 1440px) {
  .hi-medallion {
    --size: clamp(380px, 20vw, 480px);
  }
}

/* üèóÔ∏è TESLA-GRADE: Ultra-wide desktop scaling */
@media screen and (min-width: 1920px) {
  .hi-medallion {
    --size: clamp(420px, 18vw, 520px);
  }
}

/* ===================================================================
   üéØ CROSS-BROWSER COMPATIBILITY - All Modern Browsers
=================================================================== */

/* HI DEV: Safari specific optimizations */
@supports (-webkit-backdrop-filter: blur(1px)) {
  .hi-medallion {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

/* HI DEV: Firefox specific optimizations */
@-moz-document url-prefix() {
  .hi-medallion {
    transform: translate3d(0, 0, 0);
  }
}

/* HI DEV: Edge/IE fallbacks */
@supports not (inset: 0) {
  .hi-medallion__base,
  .hi-medallion__edge,
  .hi-medallion__halo {
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
}

/* HI DEV: High contrast mode support */
@media (prefers-contrast: high) {
  .hi-medallion__edge {
    opacity: 1;
    box-shadow: 0 0 0 2px currentColor inset;
  }
}

/* HI DEV: Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .hi-medallion,
  .hi-medallion__halo {
    transition-duration: 0.01s;
  }
  .hi-medallion__base,
  .hi-medallion__rings,
  .hi-medallion__texture,
  .hi-medallion__icon { transition: none !important; transform: none !important; }
  
  .hi-medallion.is-pulsing .hi-medallion__halo {
    animation: hiHalo 0.6s ease-out forwards; /* Override: Keep sunrise animation even with reduced motion */
    opacity: 0.9;
    transform: scale(1.06);
  }
}

/* Emphasis presets via data attribute or class */
.hi-medallion[data-ring-emphasis="low"],
.hi-medallion.ring-emphasis-low { 
  --hi-medallion-ring-gap: 36px; 
  --hi-medallion-ring-width: 1px; 
  --hi-medallion-ring-opacity: .35; 
  --hi-medallion-texture-opacity: .2; 
}
.hi-medallion[data-ring-emphasis="medium"],
.hi-medallion.ring-emphasis-medium { 
  --hi-medallion-ring-gap: 28px; 
  --hi-medallion-ring-width: 2px; 
  --hi-medallion-ring-opacity: .55; 
  --hi-medallion-texture-opacity: .25; 
}
.hi-medallion[data-ring-emphasis="high"],
.hi-medallion.ring-emphasis-high { 
  --hi-medallion-ring-gap: 22px; 
  --hi-medallion-ring-width: 2px; 
  --hi-medallion-ring-opacity: .7; 
  --hi-medallion-texture-opacity: .3; 
}

/* HI DEV: Print styles */
@media print {
  .hi-medallion {
    filter: none;
    box-shadow: none;
    transform: none;
  }
  
  .hi-medallion__halo {
    display: none;
  }
}

/* ===================================================================
   üéØ TESLA ELEGANCE: Floating Feedback Animations
=================================================================== */

/* ========================================================================
   üéØ TESLA-GRADE FLOATING FEEDBACK ANIMATIONS
   Premium gradient shimmer + multi-particle burst system
======================================================================== */

/* Premium "Stay Hi +5" animation (first tap only) */
@keyframes floatUpPremium {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) translateY(0) scale(0.7) rotate(-5deg);
    background-position: 0% 50%;
    filter: drop-shadow(0 0 12px rgba(147, 51, 234, 0.6)) drop-shadow(0 4px 8px rgba(147, 51, 234, 0.3)) blur(0px);
  }
  15% {
    opacity: 1;
    transform: translate(-50%, -50%) translateY(-15px) scale(1.1) rotate(2deg);
    background-position: 100% 50%;
  }
  35% {
    transform: translate(-50%, -50%) translateY(-25px) scale(1.05) rotate(0deg);
    background-position: 200% 50%;
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) translateY(-100px) scale(1.1) rotate(3deg);
    background-position: 400% 50%;
    filter: drop-shadow(0 0 20px rgba(147, 51, 234, 0.4)) drop-shadow(0 8px 16px rgba(147, 51, 234, 0.2)) blur(4px);
  }
}

/* Particle burst animations (subsequent taps) */
@keyframes floatUpParticle1 {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) translateY(0) translateX(0) scale(0.8) rotate(0deg);
    filter: drop-shadow(0 0 8px rgba(147, 51, 234, 0.4)) blur(0px);
  }
  20% {
    opacity: 1;
    transform: translate(-50%, -50%) translateY(-10px) translateX(calc(sin(var(--angle)) * 15px)) scale(1) rotate(var(--rotation));
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) translateY(calc(-1 * var(--distance))) translateX(calc(sin(var(--angle)) * var(--distance) * 0.5)) scale(0.9) rotate(calc(var(--rotation) * 1.5));
    filter: drop-shadow(0 0 12px rgba(147, 51, 234, 0.2)) blur(2px);
  }
}

@keyframes floatUpParticle2 {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) translateY(0) translateX(0) scale(0.75) rotate(0deg);
    filter: drop-shadow(0 0 6px rgba(147, 51, 234, 0.3)) blur(0px);
  }
  25% {
    opacity: 0.9;
    transform: translate(-50%, -50%) translateY(-8px) translateX(calc(sin(var(--angle)) * 12px)) scale(0.95) rotate(var(--rotation));
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) translateY(calc(-1 * var(--distance) * 0.9)) translateX(calc(sin(var(--angle)) * var(--distance) * 0.4)) scale(0.85) rotate(calc(var(--rotation) * 1.3));
    filter: drop-shadow(0 0 10px rgba(147, 51, 234, 0.15)) blur(2px);
  }
}

@keyframes floatUpParticle3 {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) translateY(0) translateX(0) scale(0.7) rotate(0deg);
    filter: drop-shadow(0 0 4px rgba(147, 51, 234, 0.2)) blur(0px);
  }
  30% {
    opacity: 0.8;
    transform: translate(-50%, -50%) translateY(-6px) translateX(calc(sin(var(--angle)) * 10px)) scale(0.9) rotate(var(--rotation));
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) translateY(calc(-1 * var(--distance) * 0.8)) translateX(calc(sin(var(--angle)) * var(--distance) * 0.3)) scale(0.8) rotate(calc(var(--rotation) * 1.2));
    filter: drop-shadow(0 0 8px rgba(147, 51, 234, 0.1)) blur(2px);
  }
}

/* Floating element base styles */
.hi-medallion-floater-premium,
.hi-medallion-floater-particle {
  font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

.hi-medallion-floater-premium {
  font-feature-settings: 'liga', 'kern';
}

.hi-medallion-floater-particle {
  font-feature-settings: 'tnum';
}
