<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Stay Hi ‚Äî Today</title>

  <!-- Brand + shared styles -->
  <link rel="stylesheet" href="assets/theme.css"/>
  <link rel="stylesheet" href="assets/create-parity.css"/>

  <style>
    :root{
      /* Fine-tune logo alignment if your PNG has uneven transparent padding */
      --logo-x: 0%;         /* e.g. -2% or 6px */
      --logo-y: 0%;         /* e.g. 1% or -4px */
      --logo-scale: 1.06;   /* gentle zoom to fill the halo */
    }

    /* Layout */
    .wrap{max-width:980px;margin:0 auto;padding:16px}
    .center{display:grid;place-items:center}
    .spaced{display:flex;flex-direction:column;align-items:center;gap:12px}

    /* 7-day strip */
    .weekstrip{display:flex;gap:10px;justify-content:center;margin:10px 0 14px}
    .weekdot{display:flex;flex-direction:column;align-items:center;gap:6px;min-width:40px}
    .weekdot .lbl{font-size:11px;opacity:.85;color:#cfd2ea}
    .weekdot .c{width:22px;height:22px;border-radius:50%;display:grid;place-items:center;border:1px solid #2a2e55;color:#cfd2ea}
    .weekdot .c.met{background:linear-gradient(135deg, #ffd166, #ff7a18); color:#111; border-color:#0000}

    /* Card shell from parity */
    .panel{background:#0f1022;border:1px solid #23264d;border-radius:22px;box-shadow:0 22px 60px rgba(0,0,0,.35)}

    /* Hi medallion (bigger halo) */
    .hi-medal{
      width:min(540px,86vw); aspect-ratio:1/1; border-radius:999px;
      background:#0f1022; border:1px solid #23264d; box-shadow:0 14px 40px rgba(0,0,0,.35);
      position:relative; overflow:hidden; transition:box-shadow .25s ease, transform .18s ease;
    }
    /* inner glow rings */
    .hi-medal::before, .hi-medal::after{
      content:""; position:absolute; inset:11%; border-radius:50%;
      border:10px solid #1d2242; z-index:0;
    }
    .hi-medal::after{ inset:25% }

    /* Live halo pulse on tap */
    @keyframes haloPulse {
      0%{ box-shadow:0 14px 40px rgba(0,0,0,.35), inset 0 0 0 0 rgba(255,210,102,.0) }
      40%{ box-shadow:0 22px 60px rgba(0,0,0,.45), inset 0 0 44px 10px rgba(255,122,24,.26) }
      100%{ box-shadow:0 14px 40px rgba(0,0,0,.35), inset 0 0 0 0 rgba(255,210,102,.0) }
    }
    .hi-medal.pulse{ animation: haloPulse 900ms ease-out }

    /* Center logo + Hi Wave pill */
    .hi-logo{ position:absolute; inset:0; display:grid; place-items:center; z-index:2 }
    .hi-logo .wave-pill{
      position:absolute; top:16px; left:50%; transform:translateX(-50%);
      background:#fff; color:#111; border:1px solid var(--hi-border);
      padding:6px 12px; border-radius:999px; font-weight:800; font-size:14px;
      box-shadow:0 6px 16px rgba(0,0,0,.25)
    }

    /* The actual mark */
    .hi-mark{
      width:72%; height:72%;
      max-width:420px; max-height:420px;
      display:block; filter:drop-shadow(0 8px 22px rgba(0,0,0,.38));
      object-fit:contain; object-position:center;
      /* optical fine-tuning knobs (change in :root if needed) */
      transform: translate(var(--logo-x), var(--logo-y)) scale(var(--logo-scale));
    }

    /* Logo pop on tap */
    @keyframes logoPop {
      0%{ transform: translate(var(--logo-x), var(--logo-y)) scale(var(--logo-scale)) }
      40%{ transform: translate(var(--logo-x), var(--logo-y)) scale(calc(var(--logo-scale) * 1.06)) }
      100%{ transform: translate(var(--logo-x), var(--logo-y)) scale(var(--logo-scale)) }
    }
    .logo-pop{ animation: logoPop 320ms cubic-bezier(.22,1,.36,1) }

    /* Emoji burst layer for taps */
    .burst{ position:absolute; inset:0; pointer-events:none; z-index:3 }
    .burst span{ position:absolute; font-size:26px; will-change:transform,opacity }
    @keyframes waveUp {
      0%{ transform:translate(-50%,-50%) scale(var(--s,1)); opacity:.9 }
      100%{ transform:translate(calc(-50% + var(--dx,0px)),-260%) scale(calc(var(--s,1)*.9)); opacity:0 }
    }

    /* Confetti for Self Hi-5 */
    .confetti{ position:fixed; inset:0; pointer-events:none; z-index:900 }
    .confetti i{ position:absolute; width:8px; height:8px; background:#fff; opacity:0; border-radius:2px }

    /* Counters row */
    .counters{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:6px}
    .pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid #2a2e55;background:#0f1228;color:#cfd2ea;font-weight:800}

    /* Actions */
    .actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:12px}

    /* Share sheet */
    .sheet-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;z-index:50}
    .sheet{position:fixed;left:0;right:0;bottom:-100%;background:var(--hi-bg);border-radius:18px 18px 0 0;border:1px solid var(--hi-border);padding:16px 14px;z-index:60;box-shadow:0 -10px 30px rgba(0,0,0,.12)}
    .sheet.show + .sheet-backdrop{display:block}
    .sheet.show{animation:sheetIn .25s ease-out forwards}
    .sheet.hide{animation:sheetOut .2s ease-in forwards}
    @keyframes sheetIn{from{bottom:-100%}to{bottom:0}}
    @keyframes sheetOut{from{bottom:0}to{bottom:-100%}}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 0;flex-wrap:wrap}
    .switch{position:relative;width:44px;height:26px;background:#e8e8e8;border-radius:999px;cursor:pointer;border:1px solid var(--hi-border)}
    .knob{position:absolute;top:2px;left:2px;width:20px;height:20px;border-radius:50%;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.2);transition:left .15s}
    .switch.on{background:#0a8a3a;border-color:#0a8a3a}
    .switch.on .knob{left:22px}
    .field{display:flex;gap:8px;align-items:center;border:1px solid var(--hi-border);border-radius:12px;padding:8px 10px;background:#fff}
    .field input{border:0;outline:0;width:100%;font:inherit}
    textarea{width:100%;border:1px solid var(--hi-border);border-radius:12px;min-height:100px;padding:12px;font:inherit;background:#fff;color:var(--hi-ink)}
    .muted{color:var(--hi-muted)}

    /* Announcement bar (rotator) ‚Äî white bg, black text */
    .announce{
      display:flex;align-items:center;gap:8px;justify-content:center;margin:8px auto 6px;
      padding:8px 12px; border-radius:999px; background:#fff; border:1px solid var(--hi-border); width:min(980px,94vw);
      box-shadow:var(--shadow);
    }
    .announce .txt{display:flex;align-items:center;gap:10px;font-weight:800;color:#111}
    .badge{display:inline-flex;align-items:center;gap:6px;font-weight:800;font-size:.75rem;padding:.25rem .5rem;border-radius:999px;background:#111;color:#fff}
    .marquee{display:block;overflow:hidden;white-space:nowrap}
    .marquee span{display:inline-block;animation:mar var(--dur,14s) linear infinite}
    @keyframes mar{from{transform:translateX(0)}to{transform:translateX(-50%)}}
  </style>
</head>
<body class="sunrise" data-tab="today">
  <!-- Header -->
  <header id="app-header" class="header"></header>

  <!-- Announcement rotator -->
  <div id="announceWrap" class="announce">
    <div id="announceTxt" class="txt"></div>
  </div>

  <main class="wrap">
    <!-- 7-day strip -->
    <div id="weekStrip" class="weekstrip" aria-label="Your week"></div>

    <!-- Card -->
    <section class="panel center" aria-label="Hi panel" style="padding:18px">
      <div class="spaced" style="width:100%">
        <!-- Hi medallion -->
        <div class="hi-medal" id="hiMedal" style="margin:0 auto">
          <div class="hi-logo" id="hiLogo">
            <div class="wave-pill">‚ú® Hi Wave</div>

            <!-- YOUR LOGO (auto light/dark) -->
            <picture>
              <!-- Dark UI ‚Üí white logo -->
              <source srcset="assets/brand/hi-logo-light.png" media="(prefers-color-scheme: dark)">
              <!-- Light UI ‚Üí black logo -->
              <source srcset="assets/brand/hi-logo-dark.png"  media="(prefers-color-scheme: light)">
              <!-- Fallback (site is dark-themed) -->
              <img class="hi-mark" src="assets/brand/hi-logo-light.png" alt="Stay Hi">
            </picture>
          </div>
          <div class="burst" id="burst"></div>
        </div>

        <!-- Counters -->
        <div class="counters">
          <span class="pill">Today <b id="todayCount">0</b></span>
          <span class="pill">Streak <b id="streakLen">0</b> üî•</span>
          <span class="pill">Total Hi-5s <b id="totalCount">0</b></span>
        </div>

        <!-- Primary action -->
        <div class="actions">
          <button id="hiBtn" class="hi-btn hi-btn--primary" style="min-width:280px">Self Hi-5</button>
        </div>
      </div>
    </section>

    <!-- Links -->
    <div class="center" style="margin-top:10px">
      <a class="hi-btn hi-btn--ghost" href="hi-island.html">Go to Hi Island</a>
    </div>
  </main>

  <!-- Share Sheet -->
  <div id="sheet" class="sheet" role="dialog" aria-modal="true" aria-labelledby="sheetTitle" aria-hidden="true">
    <h3 id="sheetTitle">Want to capture this Hi moment?</h3>
    <p class="muted">We‚Äôll always save a private copy in <b>My Archive</b>. You can also share to the public feed.</p>

    <div class="row" style="margin-top:6px">
      <div>
        <div style="font-weight:800">Show on Hi Island</div>
        <div class="muted">Appear in the global General Shares feed</div>
      </div>
      <div id="togglePublic" class="switch on" role="switch" aria-checked="true" tabindex="0"><div class="knob" aria-hidden="true"></div></div>
    </div>

    <div class="row">
      <div>
        <div style="font-weight:800">Post as Anonymous</div>
        <div class="muted">Your name becomes ‚ÄúHi Friend‚Äù</div>
      </div>
      <div id="toggleAnon" class="switch" role="switch" aria-checked="false" tabindex="0"><div class="knob" aria-hidden="true"></div></div>
    </div>

    <div class="field" aria-label="Optional location">
      <span>üìç</span><input id="locationInput" placeholder="City, State (optional)"/>
    </div>

    <div style="margin-top:8px">
      <textarea id="journal" maxlength="500" placeholder="What was the Hi moment you just noticed? (1‚Äì2 lines)"></textarea>
    </div>

    <div class="row" style="justify-content:flex-end">
      <button id="cancelShare" class="hi-btn hi-btn--ghost">Not now</button>
      <button id="
