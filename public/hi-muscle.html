<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Build Your Hi Muscle â€” Stay Hi</title>
  <link rel="stylesheet" href="assets/create-parity.css"/>
  <style>
    :root{
      --hi-green:#006400;
      --hi-amber:#F5A623;
      --ink:#111;
      --muted:#666;
      --bg:#FFFDF9;
      --chip:#ffffff;
      --chip-b:#e9e9e9;
      --ring:#ffd78a;
    }
    body{background:var(--bg); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;}
    .wrap{max-width:980px;margin:0 auto;padding:16px}
    .title{font-weight:900;color:var(--ink);text-align:center;margin:8px 0 12px}
    .subtitle{color:var(--muted);text-align:center;margin:0 0 16px}
    /* stepper */
    .stepper{display:flex;align-items:center;justify-content:center;gap:10px;margin:10px auto 16px}
    .dot{width:12px;height:12px;border-radius:50%;background:#e5e5e5;border:2px solid #ddd}
    .dot.active{background:var(--hi-green);border-color:var(--hi-green)}
    .pipe{height:2px;width:44px;background:#e5e5e5}
    .pipe.filled{background:var(--hi-green)}
    /* tabs */
    .tabs{display:flex;gap:6px;overflow:auto;border-bottom:1px solid #eee;padding-bottom:6px;margin-bottom:10px}
    .tab{white-space:nowrap;padding:8px 12px;border-radius:999px;border:1px solid var(--chip-b);background:var(--chip);font-weight:700;color:#333;cursor:pointer}
    .tab[aria-selected="true"]{background:#111;color:#fff;border-color:#111}
    /* search */
    .search{display:flex;gap:8px;align-items:center;background:#fff;border:1px solid #eee;border-radius:12px;padding:8px 10px}
    .search input{border:0;outline:0;width:100%;font-size:16px}
    /* grid of chips */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px}
    @media (max-width:720px){ .grid{grid-template-columns:repeat(2,1fr);} }
    .chip{
      display:flex;gap:8px;align-items:center;
      background:var(--chip); border:1px solid var(--chip-b); border-radius:14px;
      padding:10px 12px; cursor:pointer; position:relative;
      transition:transform .08s ease, box-shadow .12s ease, border-color .12s ease;
    }
    .chip:hover{transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,.05)}
    .chip .emo{font-size:20px}
    .chip .name{font-weight:800;color:#222}
    .chip .desc{font-size:12px;color:#666;line-height:1.2}
    .chip.selected{outline:3px solid var(--ring); border-color:#ffefc7; background:#fffaf0}
    .pickTitle{font-weight:900;color:#222;margin:14px 0 6px}
    .actions{display:flex;gap:10px;justify-content:center;margin:16px 0}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;
         padding:12px 16px;border-radius:14px;font-weight:900;cursor:pointer;border:1px solid transparent}
    .btn-primary{background:var(--hi-green);color:#fff}
    .btn-ghost{background:#fff;border-color:#ddd;color:#111}
    .btn[disabled]{opacity:.6;cursor:not-allowed}
    /* journal */
    .card{background:#fff;border:1px solid #eee;border-radius:16px;padding:14px}
    textarea{width:100%;border:1px solid #e4e4e4;border-radius:12px;min-height:110px;padding:12px;font:inherit}
    .hint{color:var(--muted);font-size:12px}
    .badge{display:inline-flex;align-items:center;gap:8px;background:#fff;border:1px solid #eee;border-radius:999px;padding:8px 10px;font-weight:700}
    .inline{display:flex;gap:10px;flex-wrap:wrap}
    .toast{position:fixed;left:50%;bottom:20px;transform:translateX(-50%);background:#000;color:#fff;padding:10px 14px;border-radius:12px;opacity:0;pointer-events:none}
    .toast.show{opacity:1;transition:opacity .2s}
  </style>
</head>
<body>
  <header id="app-header"></header>

  <div class="wrap">
    <h1 class="title">Build Your Hi Muscle</h1>
    <p class="subtitle">Pick your <b>current vibe</b>, then your <b>desired vibe</b>. Reflect for 1â€“2 lines. Drop your Hi.</p>

    <!-- stepper -->
    <div class="stepper" aria-label="Progress">
      <div class="dot" id="s1"></div><div class="pipe" id="p1"></div><div class="dot" id="s2"></div>
    </div>

    <!-- selection badges -->
    <div class="inline" style="justify-content:center;margin-bottom:8px">
      <span class="badge" id="badge-current" style="display:none"></span>
      <span class="badge" id="badge-desired" style="display:none"></span>
    </div>

    <!-- tabs + search -->
    <div class="tabs" role="tablist" aria-label="Emotion categories">
      <button class="tab" role="tab" id="tab-hi" aria-selected="true" data-cat="hi">Hi Energy</button>
      <button class="tab" role="tab" id="tab-neutral" aria-selected="false" data-cat="neutral">Neutral</button>
      <button class="tab" role="tab" id="tab-opportunity" aria-selected="false" data-cat="opportunity">Hi Opportunity</button>
    </div>

    <div class="search">
      <span>ðŸ”Ž</span><input id="search" placeholder="Search emotions (e.g., calm, joy, worry)"/>
      <button id="toggleView" class="btn btn-ghost" style="padding:8px 10px">Compact</button>
    </div>

    <!-- grid -->
    <div id="grid" class="grid" aria-live="polite"></div>

    <!-- journal card (appears after both selected) -->
    <div id="journalCard" class="card" style="display:none;margin-top:14px">
      <div class="pickTitle">Hi Reflection (why this vibe matters)</div>
      <textarea id="journal" maxlength="600" placeholder="One or two honest lines. What would Hi look or feel like right now?"></textarea>
      <div class="inline" style="justify-content:space-between;margin-top:6px">
        <span class="hint" id="count">0/600</span>
        <label class="hint"><input type="checkbox" id="anon" /> Share anonymously</label>
      </div>
    </div>

    <!-- actions -->
    <div class="actions">
      <button id="back" class="btn btn-ghost">Back</button>
      <button id="next" class="btn btn-primary" disabled>Continue</button>
    </div>

    <div class="inline" style="justify-content:center;margin-top:8px">
      <a class="btn btn-ghost" href="hi-island.html">Go to Hi Island</a>
      <a class="btn btn-ghost" href="index.htm
